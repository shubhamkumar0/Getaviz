<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Ring</title>
	<meta name="description" content="Getaviz">	
	<script id="vertexShader" type="x-shader/x-vertex">
			precision mediump float;
			precision mediump int;
			uniform mat4 modelViewMatrix; // optional
			uniform mat4 projectionMatrix; // optional
			attribute vec3 position;
			attribute vec4 color;
			varying vec3 vPosition;
			varying vec4 vColor;
			void main()	{
				vPosition = position;
				vColor = color;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}
		</script>
		<script id="fragmentShader" type="x-shader/x-fragment">
			precision mediump float;
			precision mediump int;
			uniform float time;
			varying vec3 vPosition;
			varying vec4 vColor;
			void main()	{
				vec4 color = vec4( vColor );
				color.r += sin( vPosition.x * 10.0 + time ) * 0.5;
				gl_FragColor = color;
			}
		</script>
				

		<script type="module">
			import * as THREE from '../build/three.module.js';
			import Stats from './jsm/libs/stats.module.js';
			var container, stats;
			var camera, scene, renderer;
			init();
			animate();
			function init() {
				container = document.getElementById( 'container' );
				camera = new THREE.PerspectiveCamera( 50, window.innerWidth / window.innerHeight, 1, 10 );
				camera.position.z = 2;
				scene = new THREE.Scene();
				scene.background = new THREE.Color( 0x101010 );
				// geometry
				var triangles = 500;
				var geometry = new THREE.BufferGeometry();
				var positions = [];
				var colors = [];
				for ( var i = 0; i < triangles; i ++ ) {
					positions.push( Math.random() - 0.5 );
					positions.push( Math.random() - 0.5 );
					positions.push( Math.random() - 0.5 );
					colors.push( Math.random() * 255 );
					colors.push( Math.random() * 255 );
					colors.push( Math.random() * 255 );
					colors.push( Math.random() * 255 );
				}
				var positionAttribute = new THREE.Float32BufferAttribute( positions, 3 );
				var colorAttribute = new THREE.Uint8BufferAttribute( colors, 4 );
				colorAttribute.normalized = true; // this will map the buffer values to 0.0f - +1.0f in the shader
				geometry.addAttribute( 'position', positionAttribute );
				geometry.addAttribute( 'color', colorAttribute );
				// material
				var material = new THREE.RawShaderMaterial( {
					uniforms: {
						time: { value: 1.0 }
					},
					vertexShader: document.getElementById( 'vertexShader' ).textContent,
					fragmentShader: document.getElementById( 'fragmentShader' ).textContent,
					side: THREE.DoubleSide,
					transparent: true
				} );
				var mesh = new THREE.Mesh( geometry, material );
				scene.add( mesh );
				renderer = new THREE.WebGLRenderer();
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				container.appendChild( renderer.domElement );
				stats = new Stats();
				container.appendChild( stats.dom );
				window.addEventListener( 'resize', onWindowResize, false );
			}
			function onWindowResize() {
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				renderer.setSize( window.innerWidth, window.innerHeight );
			}
			//
			function animate() {
				requestAnimationFrame( animate );
				render();
				stats.update();
			}
			function render() {
				var time = performance.now();
				var object = scene.children[ 0 ];
				object.rotation.y = time * 0.0005;
				object.material.uniforms.time.value = time * 0.005;
				renderer.render( scene, camera );
			}
		</script>
</head>
<body>
<a-scene id="aframe-canvas"  cursor="rayOrigin: mouse" embedded="true" stats>
	<a-entity buffer-geometry-merger material="vertexColors: vertex" >
	<a-entity
			id="camera"
			camera="fov: 80; zoom: 1;"
			position="44.0 20.0 44.0"
			rotation="0 -90 0"
			orbit-camera="
                    target: 15.0 1.5 15.0;
                    enableDamping: true;
                    dampingFactor: 0.25;
                    rotateSpeed: 0.25;
                    panSpeed: 0.25;
                    invertZoom: true;
                    logPosition: false;
                    minDistance:0;
                    maxDistance:1000;
                "
			mouse-cursor=""
	>
	</a-entity>
	
	<a-entity geometry="primitive:box; skipCache: true;  width:32.0;	height:1.0;	depth:40.0"
	 	id="ID_bdd240c8fe7174e6ac1cfdd5282de76eb7ad6815"
		position="19.0 1.5 23.0"
		vertex-colors-buffer="baseColor: #969696"
		flat-shading="true"
        shader="fragmentShader">
	</a-entity>
	<a-entity geometry="primitive:box; skipCache: true;  width:7.0;	height:11.0;	depth:7.0"
	 	id="ID_527aa1c76ab5cca95e6dbfcea35a5d2d9f5d737f"
		position="28.5 7.5 9.5"
		vertex-colors-buffer="baseColor: #353559"
        flat-shading="true"
        shader="fragmentShader">
	</a-entity>
	<a-entity geometry="primitive:box; skipCache: true;  width:10.0;	height:1.0;	depth:16.0"
	 	id="ID_4481fcdc97864a546f67c76536e0308a3058f75d"
	    position="11.0 2.5 32.0"		   
	    vertex-colors-buffer="baseColor: #969696"
        flat-shading="true"
        shader="fragmentShader">
	</a-entity>
	<a-entity geometry="primitive:box; skipCache: true;  width:3.0;	height:5.0;	depth:3.0"
	 	id="ID_26f25e4da4c82dc2370f3bde0201e612dd88c04c"
		position="10.5 5.5 35.5"		   
		vertex-colors-buffer="baseColor: #353559"
        flat-shading="true"
        shader="fragmentShader">
	</a-entity>
	<a-entity geometry="primitive:box; skipCache: true;  width:4.0;	height:6.0;	depth:4.0"
	 	id="ID_9fa088272bab165867bfaddcfbf58d6a7d5d45a2"
		position="11.0 6.0 29.0"
		flat-shading="true"
        shader="fragmentShader"
		vertex-colors-buffer="baseColor: #353559">
	</a-entity>
	<a-entity geometry="primitive:box; skipCache: true;  width:16.0;	height:1.0;	depth:15.0"
	 	id="ID_052028080c3d64381f56397d59113102bf4e5921"
		position="14.0 2.5 13.5"
		vertex-colors-buffer="baseColor: #969696"
        flat-shading="true"
        shader="fragmentShader">
	</a-entity>
	<a-entity geometry="primitive:box; skipCache: true;  width:4.0;	height:6.0;	depth:4.0"
	 	id="ID_ecbec7f0190fc1c903a87797d35427dc7a1f240b"
		position="11.0 6.0 11.0"
		vertex-colors-buffer="baseColor: #353559"
        flat-shading="true"
        shader="fragmentShader">
	</a-entity>
	<a-entity geometry="primitive:box; skipCache: true;  width:1.0;	height:2.0;	depth:1.0"
	 	id="ID_e14c10820a526fde0ea0beee073b947e1ca67a4a"
		position="18.5 4.0 16.5"
		vertex-colors-buffer="baseColor: #353559"
        flat-shading="true"
        shader="fragmentShader">
	</a-entity>
	<a-entity geometry="primitive:box; skipCache: true;  width:1.0;	height:2.0;	depth:1.0"
	 	id="ID_9e346826c780b8b1975dc8906296cc47974ccd4e"
		position="14.5 4.0 16.5"
		vertex-colors-buffer="baseColor: #353559"
        flat-shading="true"
        shader="fragmentShader">
	</a-entity>
	<a-entity geometry="primitive:box; skipCache: true;  width:1.0;	height:2.0;	depth:1.0"
	 	id="ID_fba940eea4ca7f9002bc529bbb0cbc8fc0423985"
		position="16.5 4.0 9.5"
		vertex-colors-buffer="baseColor: #353559"
        flat-shading="true"
        shader="fragmentShader">
	</a-entity>
	<a-entity geometry="primitive:box; skipCache: true;  width:2.0;	height:4.0;	depth:2.0"
	 	id="ID_841936e6f873f49a85e18a4a94df5d7dfe591edf"
		position="10.0 5.0 17.0"
		vertex-colors-buffer="baseColor: #353559"
        flat-shading="true"
        shader="fragmentShader">
	</a-entity>
	</a-entity>
</a-scene>
</body>
</html>
